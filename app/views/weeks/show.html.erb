<header class="p-4 md:p-6 bg-yellow-400 flex flex-wrap items-center relative">
  <div class="p-4 md:p-6 absolute right-0 top-0">
    <%= link_to(
      sign_out_path,
      method: :delete,
      class: "block p-2 leading-none hover:opacity-75"
    ) do %>
      Sign out
    <% end %>
  </div>

  <nav class="w-full">
    <ul class="flex text-xl leading-none">
      <li>
        <%= render(TimeRanges::LinkComponent.new(
          time_range: @week.year,
          class: "block py-2 hover:text-yellow-700"
        )) do %>
          <%= @week.year.value %>
        <% end %>
      </li>
    </ul>
  </nav>

  <h1 class="text-4xl leading-none font-medium py-2 mr-auto">
    Week <%= @week.value %>
  </h1>

  <%= render(TimeRanges::NavigationComponent.new(time_range: @week)) %>

  <div class="p-4 fixed bottom-0 right-0 z-30">
    <%= render(Events::NewLinkComponent.new(
      time_range: @week,
      class: "block p-5 rounded-full bg-green-600 text-white leading-none hover:bg-green-800 text-xl"
    )) do %>
      <span class="text-2xl mr-2">+</span> New Event
    <% end %>
  </div>
</header>

<main class="p-4 md:p-6">
  <section
    class="grid"
    style="
      grid-template-columns: 4rem repeat(7, 1fr);
      grid-template-rows: auto auto 1fr;
    "
  >
    <div
      class="
        row-start-3
        col-start-1
        p-2
      "
    >
      <%= render(Days::TimeMeasureComponent.new) %>
    </div>

    <% @week.days_by_month.each do |month, days| %>
      <h2
        class="
          row-start-1
          col-start-<%= days.first.starts_at.cwday + 1 %>
          p-2
          text-lg
          font-bold
        "
      >
        <%= render(TimeRanges::LinkComponent.new(
          time_range: month
        )) do %>
          <%= render(Months::NameComponent.new(month: month)) %>
        <% end %>
      </h2>
      <% days.each do |day| %>
        <h3
          class="
            sticky
            top-0
            z-20
            row-start-2
            col-start-<%= day.starts_at.cwday + 1 %>
            p-2
            bg-white
          "
        >
          <%= render(TimeRanges::LinkComponent.new(
            time_range: day,
          )) do %>
            <%= day.value.to_s %> <%= day.starts_at.strftime("%a") %>
          <% end %>
        </h3>

        <section
          class="
            row-start-3
            col-start-<%= day.starts_at.cwday + 1 %>
            z-10
            p-2
          "
        >
          <%= render(Days::TimeLineComponent.new(day: day)) %>
        </section>
      <% end %>
    <% end %>
  </section>
<main>
