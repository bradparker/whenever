<%= render(TimeRanges::HeaderComponent.new(time_range: @week)) %>

<main class="p-3 md:p-6">
  <section
    class="grid"
    style="
      grid-template-columns: 4rem repeat(7, 1fr);
      grid-template-rows: auto auto 1fr;
    "
  >
    <div
      class="
        row-start-3
        col-start-1
        p-2
      "
    >
      <%= render(Days::TimeMeasureComponent.new) %>
    </div>

    <% @week.days_by_month.each do |month, days| %>
      <h2
        class="
          row-start-1
          col-start-<%= days.first.starts_at.cwday + 1 %>
          p-2
          text-lg
          font-bold
        "
      >
        <%= render(TimeRanges::LinkComponent.new(
          time_range: month
        )) do %>
          <%= render(Months::NameComponent.new(month: month)) %>
        <% end %>
      </h2>
      <% days.each do |day| %>
        <h3
          class="
            sticky
            top-0
            z-20
            row-start-2
            col-start-<%= day.starts_at.cwday + 1 %>
            p-2
            bg-white
          "
        >
          <%= render(TimeRanges::LinkComponent.new(
            time_range: day,
          )) do %>
            <%= day.value.to_s %> <%= day.starts_at.strftime("%a") %>
          <% end %>
        </h3>

        <section
          class="
            row-start-3
            col-start-<%= day.starts_at.cwday + 1 %>
            z-10
            p-2
          "
        >
          <%= render(Days::TimeLineComponent.new(day: day)) %>
        </section>
      <% end %>
    <% end %>
  </section>
<main>
